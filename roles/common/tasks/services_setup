  - name: remove accidental template files from destination
    ansible.builtin.file:
      path: "/etc/systemd/system/{{ component }}.service.j2"
      state: absent
  
  - name: copy {{ component }} services
    ansible.builtin.template: 
      src: "{{ component }}.service.j2"
      dest: "/etc/systemd/system/{{ component }}.service" 
    notify: daemon_reload
    
  - name: start service and daemon_reload
    ansible.builtin.systemd_service:
      name: "{{ component }}"
      state: started
      enabled: true